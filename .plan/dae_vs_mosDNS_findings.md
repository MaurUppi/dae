# dae 与 mosDNS 压力测试对比分析报告（2026-02-16 数据）
**报告日期**：2026年02月16日
**分析对象**：dae（数据来源：probes_20260216_135033.csv）、mosDNS（数据来源：probes_20260216_135813.csv）
**测试数据量**：各2000条请求记录（分100轮，每轮20次请求）
**核心指标**：解析成功率中位数、时间指标（ms）中位数、失败类型分布

## 一、解析成功率中位数对比
通过100个测试轮次的统计，mosDNS 在可用性上展现出绝对优势，具体数据如下：

| 服务类型 | 成功率中位数 | 成功率平均值 | 成功率范围 | 整体失败率 | 各轮表现特点 |
|----------|--------------|--------------|------------|------------|----------------|
| dae      | **60.0%**    | 60.05%       | 35.0%-80.0% | 39.95%     | 波动极大，近40%请求失败，最低轮次仅35%成功率 |
| mosDNS   | **100.0%**   | 96.80%       | 85.0%-100.0% | 3.20%      | 超60%轮次达100%成功率，最低轮次仍保持85%，稳定性极强 |

### 关键结论
1. mosDNS 成功率中位数比 dae 高出 **40个百分点**，接近满分水平；
2. dae 整体失败率达39.95%，每2.5次请求约1次失败，远无法满足生产环境可用性需求；
3. mosDNS 仅64次失败（总2000次请求），且无极端低成功率轮次，服务稳定性碾压 dae。

## 二、时间指标中位数对比（统一单位：ms）
时间指标反映响应速度，仅统计成功请求数据（过滤失败的-1.0值），mosDNS 在此维度同样领先：

| 时间指标                | dae 中位数 | mosDNS 中位数 | 性能差异（mosDNS 优势） |
|-------------------------|------------|---------------|--------------------------|
| time_namelookup（域名解析时间） | 58.0 ms    | 39.0 ms       | 快 19.0 ms               |
| time_total（总响应时间）    | 58.0 ms    | 39.0 ms       | 快 19.0 ms               |

### 关键结论
1. mosDNS 解析速度比 dae 快 **40%**，响应更迅速，能显著提升业务访问体验；
2. dae 解析耗时58ms，虽在可接受范围内，但结合高失败率，实际业务效率大幅降低；
3. 两种服务均无3秒以上极端延迟，但 mosDNS 响应时间稳定性更优（无大幅波动）。

## 三、失败类型分布对比
通过错误日志分类，明确两种服务的失败根源，为问题排查提供方向：

### 3.1 dae 失败类型（总失败799次）
- **解析超时**：531次，占比66.46% —— 主要失败原因，推测与DNS解析流程效率低、缓存策略缺失或上游服务器响应慢相关；
- **连接超时**：268次，占比33.54% —— 次要失败原因，可能与服务器连接池配置不足、网络链路不稳定有关。

### 3.2 mosDNS 失败类型（总失败64次）
- **解析超时**：64次，占比100.0% —— 无连接超时问题，失败均为个别特殊域名解析异常（如小众域名记录不存在、境外域名访问限制），不影响整体服务可用性。

### 关键结论
1. dae 同时存在解析超时和连接超时双重问题，需从解析流程优化、连接池配置调整两方面整改；
2. mosDNS 无连接超时风险，失败仅为偶发的域名自身问题，服务可靠性更高；
3. dae 失败次数（799次）是 mosDNS（64次）的 **12.5倍**，故障风险显著更高。

## 四、可视化对比图表
![dae 与 mosDNS 压力测试对比分析](.plan/dae_mosdns_20260216_comparison.png)

图表包含四个核心维度：
1. **各轮次解析成功率分布（箱线图）**：直观展示 mosDNS 成功率集中且高位稳定，dae 离散且波动大；
2. **时间指标中位数对比（柱状图）**：清晰呈现 mosDNS 在解析速度上的显著优势；
3. **dae 失败类型分布（饼图）**：明确解析超时为主要失败原因，且存在连接超时问题；
4. **mosDNS 失败类型分布（饼图）**：展示仅存在偶发解析超时，无连接超时风险。

## 五、综合评估结论
从可用性、响应速度、稳定性三个核心维度综合评估，mosDNS 完全碾压 dae：

| 评估维度 | dae 表现 | mosDNS 表现 | 推荐结论 |
|----------|----------|-------------|----------|
| 可用性   | 极差（60%成功率，40%失败率） | 优秀（100%中位数，3.2%失败率） | mosDNS 完全满足生产需求，dae 需彻底优化 |
| 响应速度 | 一般（58ms，耗时较长） | 优秀（39ms，响应迅速） | mosDNS 速度优势明显，能提升业务效率 |
| 稳定性   | 极差（成功率波动45个百分点） | 优秀（成功率波动15个百分点） | mosDNS 服务稳定性无风险，dae 故障频发 |